SceneKit & Xcode 3D Development RulesðŸŽ¯ Project ContextEngine: SceneKit (Apple's high-level 3D engine)Language: Swift (target Swift 6 concurrency if applicable)Platform: iOS/macOS/visionOSCoordinate System: Right-handed, Y-Up (standard SceneKit). Units are in meters.ðŸ›  Tech Stack & ImplementationUI Integration: - For SwiftUI: Use SceneView.For UIKit/AppKit: Use SCNView.Logic Separation: Keep game state in a ViewModel or GameController (ObservableObject) and scene manipulation in a dedicated SceneManager.Asset Access: Use .scnassets folders. Load scenes via SCNScene(named: "art.scnassets/model.scn").ðŸ“œ Coding Standards1. Scene Graph Best PracticesCaching: Never search for nodes in the render loop using childNode(withName:recursively:). Cache references during initialization.Node Naming: Give every interactive node a unique .name property for identification in collision delegates.Cleanup: Explicitly call node.removeFromParentNode() and set geometries/materials to nil if manually managing high-memory assets.2. Physics & MathematicsPhysics Categories: Define an enum or struct for bitmasks to handle collisions cleanly.struct PhysicsCategory {
    static let none      = 0
    static let player    = 1 << 0
    static let enemy     = 1 << 1
    static let projectile = 1 << 2
}
Rotations: Prefer SCNQuaternion or SCNAction for rotations. Avoid Euler angles (eulerAngles) for continuous rotation to prevent gimbal lock.Scaling: Always scale the geometry if possible, or use simdScale. Be wary that non-uniform scaling can break physics shapes.3. Rendering & PerformanceSCNTransaction: Wrap property changes (position, opacity, rotation) in SCNTransaction to control animation duration or disable implicit animations:SCNTransaction.begin()
SCNTransaction.animationDuration = 0.5
node.position = newPos
SCNTransaction.commit()
Draw Calls: Use flattenedClone() for static complex geometries to improve FPS.Materials: Use Physically Based (PBR) lighting models for modern projects.âš ï¸ Critical PitfallsThreading: SceneKit is NOT thread-safe. Always perform scene graph mutations (adding/removing nodes) on the main thread or inside the renderer(_:updateAtTime:) delegate method.Implicit Animations: Remember that SceneKit animates property changes by default. Use SCNTransaction.setDisableActions(true) to snap elements instantly.Physics Lag: Set physicsBody.restitution and friction explicitly; defaults often lead to "bouncy" or "sliding" behavior that feels unpolished.ðŸ¤– AI Interaction GuidelinesWhen providing code, assume a SceneManager class exists that holds the SCNScene.Prioritize SIMD types (simd_float3, simd_quatf) over SCNVector3 for math-heavy operations as they are more performant.If I ask for a "Shader," provide SCNTechnique definitions or SCNShaderModifier snippets.Always include import SceneKit and import QuartzCore.